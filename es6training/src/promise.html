<!DOCTYPE html>
<html>
<head>
	<title>ES6 Learning promises</title>
</head>
<body>
<script type="text/javascript">
	function getCustomers(){
		let promise = new Promise(
				function(resolve, reject){
					console.log("Getting customers");

					setTimeout( function(){
						let success = true;
						if(success){
							resolve("Shaju Varghese");
						}else{
							reject("Can;t get customers");
						}
					},3000)	;
				}
			);
		return promise;
	}

	function getOrders(customer){
		let promise = new Promise(
				function(resolve, reject){
					console.log("Getting orders ");
					setTimeout( function(){
						let success = true;
						if(success){
							resolve({name:customer, order:"123"});
						}else{
							reject("Can't find orders");
						}	
					},1000);
					
				}
			);
		return promise;
	}

	getCustomers()
		.then((cust)=>{console.log("Found customer ",cust); return cust;})
		.then((cust)=>getOrders(cust))
		.then(({name,order})=>{console.log(`Found order ${order} for customer ${name}`);return order;})
		.catch((err)=>console.error(err));


</script>
</body>
</html>